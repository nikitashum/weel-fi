<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Simple Sidebar - Start Bootstrap Template</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/simple-sidebar.css" rel="stylesheet">

</head>

<body>
  <div class="d-flex" id="wrapper">
    <!-- Sidebar -->
    <div class="bg-light border-right" id="sidebar-wrapper">
      <div class="sidebar-heading">WhelFi</div>
      <div class="list-group list-group-flush" id="list"></div>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
      <div class="container-fluid">
        <iframe id="mazeMap" height="500" width="800" style="border: 1px solid grey"></iframe>
        <p id="x" class="used"></p>
      </div>
    </div>
    <!-- /#page-content-wrapper -->

  </div>
  <!-- /#wrapper -->

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Menu Toggle Script -->
  <script>
    let lat = 10.405000;
    let lon = 63.417890;
    let floor = 1;

    window.onload = function(){
      if(getUrlVars()['lat'] !== undefined){
        document.getElementById('mazeMap').src = "https://use.mazemap.com/embed.html#v=1&zlevel="+getUrlVars()["floor"]+"&center="+getUrlVars()["lat"]+","+getUrlVars()["lon"]+"&zoom=21&utm_medium=iframe";
      } else {
        document.getElementById('mazeMap').src = "https://use.mazemap.com/embed.html#v=1&zlevel="+floor+"&center="+lat+","+lon+"&zoom=21&utm_medium=iframe";
      }


      for (let i = 1; i < 5; i++){
        let a = document.createElement("a");
        if (i === 3){
          a.innerHTML = i + "<span class='used'></span>";
          a.href = "?lat=10.404040&lon=63.417880&floor=2";
        } else {
          a.innerHTML = i + "<span class='free'></span>";
          a.href = "#";
        }
        a.className = "list-group-item list-group-item-action bg-light";
        document.getElementById('list').append(a);
      }
    };

    function getUrlVars() {
      let vars = {};
      window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
        vars[key] = value;
      });
      return vars;
    }
  </script>

</body>

</html>
